<!DOCTYPE html>
<html lang="kr">

<head>
	<!-- 필수 -->
	<script src="https://code.jquery.com/jquery-latest.min.js"></script>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="stylesheet" href="/static/style.css" type="text/css">
	<!-- <script type="text/javascript" src="{{ url_for('static', filename='jscript.js') }}"></script> -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="http://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
		crossorigin="anonymous"></script>
	<title>
		[KNIH] AT SCH Univ.
	</title>
	<script type="text/javascript">
		// 팝업창 생성
		function showPopup() { window.open("pop.html", "a", "width=400, height=300, left=100, top=50"); }
		var q6_1 = document.getElementById('q6-1')
		// 활성화 비활성화
		// $('.tg .tg-0lax').attr('disabled');
		$(document).ready(function () {
			$('#q6-1').on('click', function () {
				$('.form-control .tg .tg-0lax .td_block').attr('disabled', true); // 과일 종류를 입력하는 input 을 활성화합니다.
				// $('.tg').focus(); // 과일 종류를 입력하는 input 에 커서를 이동시킵니다.
			});
			$('#q6-2').on('click', function () {
				$('.form-control .tg .tg-0lax .td_block').attr('disabled', false); // 과일 종류를 입력하는 input 을 활성화합니다.
				// $('.tg').focus(); // 과일 종류를 입력하는 input 에 커서를 이동시킵니다.
			});
			$('#q7-1').on('click', function () {
				$('.form-control .text_block').attr('disabled', true); // 과일 종류를 입력하는 input 을 활성화합니다.
				// $('.tg').focus(); // 과일 종류를 입력하는 input 에 커서를 이동시킵니다.
			});
			$('#q7-2').on('click', function () {
				$('.form-control .text_block').attr('disabled', false); // 과일 종류를 입력하는 input 을 활성화합니다.
				// $('.tg').focus(); // 과일 종류를 입력하는 input 에 커서를 이동시킵니다.
			});
		});

	</script>
	<style type="text/css">
		/* border-collapse:collapse; */
		.tg {
			border-spacing: 0;
			font-size: 11px;
			display: block;
		}

		.tg td {
			border-color: black;
			border-style: solid;
			border-width: 1px;
			font-family: Arial, sans-serif;
			font-size: 11px;
			overflow: hidden;
			padding: 10px 30px;
			word-break: normal;
		}

		.tg th {
			border-color: black;
			border-style: solid;
			border-width: 1px;
			font-family: Arial, sans-serif;
			font-size: 11px;
			font-weight: normal;
			overflow: hidden;
			padding: 10px 10px;
			word-break: normal;
		}

		.tg .tg-0pky {
			border-color: inherit;
			text-align: left;
			font-size: 15px;
		}

		.tg .tg-0lax {
			text-align: left;
		}
	</style>
	<style>
		html {
			font-size: 25px;
		}

		body {
			background-color: #c8e0e7;
			/* background-color: #ffff9f; */
			font-family: Verdana;
			text-align: center;
		}

		form {
			background-color: #fff;
			/* font-size:20px; */
			max-width: 700px;
			margin: 50px auto;
			padding: 10px 20px;
			box-shadow: 2px 5px 10px rgba(38, 35, 35, 0.5);
		}

		.form-control {
			text-align: left;
			margin-bottom: 25px;
		}

		.form-control label {
			display: block;
			margin-bottom: 10px;
		}

		.form-control input,
		.form-control select,
		.form-control textarea {
			border: 1px solid #777;
			border-radius: 2px;
			font-family: inherit;
			padding: 10px;
			display: block;
			width: 95%;
		}

		.form-control input[type="radio"],
		.form-control input[type="checkbox"] {
			display: inline-block;
			width: auto;
		}

		button {
			background-color: #ffffff;
			border: 3px solid #97bbef;
			border-radius: 2px;
			font-family: inherit;
			color: #97bbef;
			font-size: 21px;
			display: block;
			width: 100%;
			margin-top: 50px;
			margin-bottom: 20px;
		}
	</style>
</head>

<body>
	<h1>Weekly Survey</h1>
	<h2>생활 습관{{value}}</h2>

	<form id="form1">
		<div class="form-control">
			<label for="q1" id="label-q1">
				1. 지난 1주 동안 하루 평균 수면 시간(낮잠 포함)은 얼마나 되십니까?
			</label>

			<input type='number' id="phonenum" name="q1(시)" />시간
			<input type='number' id="phonenum1" name="q1(분)" />분
		</div>
		<br>

		<div class="form-control">
			<label for="q2" id="label-q2">
				2. 지난 1주 동안 대략 몇 시에 잠자리에 드셔서 몇 시에 일어나셨습니까? - 잠자리에 드는 시간
			</label>
			<input type="time" id="input.timepicker" name="q2" />
		</div>
		<br>

		<div class="form-control">
			<label for="q3" id="label-q3">
				3. 지난 1주 동안 대략 몇 시에 잠자리에 드셔서 몇 시에 일어나셨습니까? - 일어나는 시간
			</label>
			<input type="time" id="input.timepicker" name="q3" />
		</div>
		<br>

		<div class="form-control">
			<label for="q4" id="label-q4">
				4. 현재 귀하는 잠들기가 어렵습니까?
			</label>
			<label for="q4-1">
				<input type="radio" id="q4-1" name="q4" value="1" checked>아니오</input>
			</label>
			<label for="q4-2">
				<input type="radio" id="q4-2" name="q4" value="2">가끔(1-2일/주)</input>
			</label>
			<label for="q4-3">
				<input type="radio" id="q4-3" name="q4" value="3">자주(3-4일/주)</input>
			</label>
			<label for="q4-4">
				<input type="radio" id="q4-4" name="q4" value="4">거의 매일</input>
			</label>
		</div>
		<br>
		<div class="form-control">
			<label for="q5" id="label-q5">
				5. 현재 귀하는 주무시다가 깨시면 다시 잠들기가 어려우십니까?
			</label>

			<label for="q5-1">
				<input type="radio" id="q5-1" name="q5" value="1" checked>아니오</input>
			</label>
			<label for="q5-2">
				<input type="radio" id="q5-2" name="q5" value="2">가끔(1-2일/주)</input>
			</label>
			<label for="q5-3">
				<input type="radio" id="q5-3" name="q5" value="3">자주(3-4일/주)</input>
			</label>
			<label for="q5-4">
				<input type="radio" id="q5-4" name="q5" value="4">거의 매일</input>
			</label>
		</div>
		<br>

		<div class="form-control">
			<label for="q6" label="label-q6">
				6. 몸에 땀이 날 정도의 규칙적인 운동을 한다면 어떤 운동을 하고 계십니까?
			</label>

			<label for="q6-1">
				<input type="radio" class="here" id="q6-1" name="q6" value="1" onclick="changeBg(this.value) ">없음</input>
			</label>
			<label for="q6-2">
				<input type="radio" id="q6-2" name="q6" value="2" checked>있음
				<table class="tg">
					<thead>
						<tr>
							<th class="tg-0pky"></th>
							<th class="tg-0pky">운동종목</th>
							<th class="tg-0pky">횟수/주당</th>
							<th class="tg-0pky">1회 평균 운동량</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td class="tg-0pky">1위</td>
							<td class="tg-0lax">
								<select name="q6-2-1" class="td_block"  id="q6-2-1">
									<option value="0">=== 선택 ===</option> 
									<option value="달리기">달리기</option>
									<option value="경보">경보</option>
									<option value="등산">등산</option>
									<option value="헬스">헬스(홈트레이닝 포함)</option>
									<option value="요가(또는 필라테스)">요가(또는 필라테스)</option>
									<option value="자전거">자전거</option>
									<option value="골프">골프</option>
								   </select>	
							</td>
								<!-- <input class="td_block" name="q6-2-1" id="q6-2-1" type="text"
									style="font-size:15px;"></td> -->
							<!-- style="width:60px;height:5px;font-size:10px;" -->
							<td class="tg-0lax">주<input class="td_block" name="q6-2-1(회)" id="q6-2-1" type='number' />회</td>
							<td class="tg-0lax"><input class="td_block" name="q6-2-1(시)" id="q6-2-1" type='number' />시간
								<input class="td_block" name="q6-2-1(분)" type='number' id="time2" />분</td>
						</tr>
						<tr>
							<td class="tg-0pky" >2위</td>
							<td class="tg-0lax">
								<select name="q6-2-2" class="td_block"  id="q6-2-2">
									<option value="0">=== 선택 ===</option> 
									<option value="달리기">달리기</option>
									<option value="경보">경보</option>
									<option value="등산">등산</option>
									<option value="헬스">헬스(홈트레이닝 포함)</option>
									<option value="요가(또는 필라테스)">요가(또는 필라테스)</option>
									<option value="자전거">자전거</option>
									<option value="골프">골프</option>
								</select>	
							<td class="tg-0lax">주<input class="td_block" name="q6-2-2(회)" id="q6-2-2" type='number' />회
							</td>
							<td class="tg-0lax"><input class="td_block" name="q6-2-2(시)" id="q6-2-2"
									type='number'/>시간<input class="td_block" name="q6-2-2(분)" type='number' id="time2" />분</td>
						</tr>
						<tr>
							<td class="tg-0pky">3위</td>
							<td class="tg-0lax">
								<select name="q6-2-3" class="td_block"  id="q6-2-3">
									<option value="0">=== 선택 ===</option> 
									<option value="달리기">달리기</option>
									<option value="경보">경보</option>
									<option value="등산">등산</option>
									<option value="헬스">헬스(홈트레이닝 포함)</option>
									<option value="요가(또는 필라테스)">요가(또는 필라테스)</option>
									<option value="자전거">자전거</option>
									<option value="골프">골프</option>
								</select>
							<td class="tg-0lax">주<input class="td_block" name="q6-2-3(회)" id="q6-2-3" type='number' />회</td>
							<td class="tg-0lax"><input class="td_block" name="q6-2-3(시)" type='number' id="time1" />시간<input
									class="td_block" type='number' name="q6-2-3(분)" id="time2" />분</td>
						</tr>
					</tbody>
				</table>
				</input>
			</label>
			<!-- 세부사항 작성 -->
		</div>
		<br>
		<div class="form-control">
			<label for="q7" label="label-q7">
				7. 평균적으로 산보/산책(걷기 운동)은 얼마나 하십니까?
			</label>

			<label for="q7-1">
				<input type="radio" id="q7-1" name="q7" value="1">하지 않음</input>
			</label>
			<label for="q7-2">
				<input type="radio" id="q7-2" name="q7" value="2" checked>
				<input type='number' id="phonenum" name="q7-2(회)" class="text_block" />회
				<input type='number' id="phonenum1" name="q7-2(분)" class="text_block" />분

			</label>
		</div>
		<br>
		<div class="form-control">
			<label for="q8" label="label-q8">
				8. 산책을 제외하고, 일상생활에서 하루에 얼마나 걸으십니까?
			</label>
			<input type='number' id="phonenum" name="q8(시)" />시
			<input type='number' id="phonenum1" name="q8(분)" />분
		</div>
		<br>
		<div class="form-control" id="q9">
			<label for="q9" label="label-q9">
				9. 일상생활 중 하루에 몇 층을 오르내리십니까?
			</label>
			<!-- <input type="button" value="상세 보기" /> -->
			<input type='number' id="phonenum" id="floor" name="q9(층)" />층

		</div>
	</form>

	<h2>정신 건강</h2>

	<!-- Create Form -->
	<form id="form2">
		<div class="form-control">
			<label for="mq1" id="label-mq1">
				1. 지난 한 주 정신적 또는 육체적으로 감당하기 힘들다고 느낀 적이 있습니까?
			</label>
			<label for="mq1-1">
				<input type="radio" id="mq1-1" name="mq1" value="1" checked>없다</input>
			</label>
			<label for="mq1-2">
				<input type="radio" id="mq1-2" name="mq1" value="2">가끔 있다</input>
			</label>
			<label for="mq1-3">
				<input type="radio" id="mq1-3" name="mq1" value="3">자주 있다</input>
			</label>
		</div>
		<br>
		<div class="form-control">
			<label for="mq2" id="label-mq2">
				2. 지난 한 주 매우 편안하며 건강하다고 느낀다.
			</label>
			<label for="mq2-1">
				<input type="radio" id="mq2-1" name="mq2" value="4" checked>항상 그렇다</input>
			</label>
			<label for="mq2-2">
				<input type="radio" id="mq2-2" name="mq2" value="3">대부분 그렇다</input>
			</label>
			<label for="mq2-3">
				<input type="radio" id="mq2-3" name="mq2" value="2">약간(이따금) 그렇다</input>
			</label>
			<label for="mq2-4">
				<input type="radio" id="mq2-4" name="mq2" value="1">전혀 그렇지 않다</input>
			</label>
		</div>
		<br>
		<div class="form-control">
			<label for="mq3" id="label-mq3">
				3. 지난 한 주 잠자고 난 후에도 개운한 감이 없다
			</label>

			<label for="mq3-1">
				<input type="radio" id="mq3-1" name="mq3" value="4" checked>항상 그렇다</input>
			</label>
			<label for="mq3-2">
				<input type="radio" id="mq3-2" name="mq3" value="3">대부분 그렇다</input>
			</label>
			<label for="mq3-3">
				<input type="radio" id="mq3-3" name="mq3" value="2">약간(이따금) 그렇다</input>
			</label>
			<label for="mq3-4">
				<input type="radio" id="mq3-4" name="mq3" value="1">전혀 그렇지 않다</input>
			</label>
		</div>
		<br>
		<div class="form-control">
			<label for="mq4" id="label-mq4">
				4. 지난 한 주 무슨 일을 하든 정신을 집중하기가 힘들었다
			</label>

			<label for="mq4-1">
				<input type="radio" id="mq4-1" name="mq4" value="4" checked>항상 그렇다</input>
			</label>
			<label for="mq4-2">
				<input type="radio" id="mq4-2" name="mq4" value="3">대부분 그렇다</input>
			</label>
			<label for="mq4-3">
				<input type="radio" id="mq4-3" name="mq4" value="2">약간(이따금) 그렇다</input>
			</label>
			<label for="mq4-4">
				<input type="radio" id="mq4-4" name="mq4" value="1">전혀 그렇지 않다</input>
			</label>
		</div>

		<!-- <button id="submit" type="button" class="btn btn-primary" style="width: 100%;" data-target="#result">제출하기</button> -->
	</form>
	<!-- Multi-line Text Input Control -->
	<!-- <button type="submit" value="submit">
			Submit
		</button> -->
	<button onclick="final()" id="submit_button" class="btn btn-primary" style="width: 100%;"
		data-target="#result">제출하기</button>

	<script>
		let q1 = document.getElementById('phonenum');
		let ID = '{{sid}}'
		let wcnt = '{{wcnt}}'
		function final() {
			document.getElementById("submit_button").innerHTML = "제출 완료";
            date = Date()
			var formData1 = $('#form1').serializeArray()
			var formData2 = $('#form2').serializeArray()
			// var formData1 = $('#form1').serialize()
			// var formData2 = $('#form2').serialize()
			var postdata = {
				ID, 'date': date, 'formData1': formData1, 'formData2': formData2
			}
			console.log(postdata)
			$.ajax({
				type: 'POST',
				url: '{{url_for("weekly")}}',
				data: JSON.stringify(postdata),
				dataType: 'JSON',
				contentType: "application/json",
				success: function (response) {
					$('body').html(response);
					// 	// data = JSON.stringify(postdata) //JSON 배열 저장됨
					// console.log(postdata)
					// location.href="http://192.168.0.18:2019/final"
					// 	// location.href="http://127.0.0.1:5000/final"
					// location.href="http://114.71.220.74:2017/daily"
					// document.write(data);
					// document.write('<button onclick="final2()" id="submit_button" class="btn btn-primary" style="width: 100%;" data-target="#result">제출하기</button>');
					// document.getElementById("ab").innerText = cnt
					// $('body').window(data)
					// 	// alert('성공! ' + postdatadata.result2['postdata'])
					// 	// alert('성공! ' + JSON.stringify(postdata))
					// 	// alert(data)
					// 	// survey.insert_one(data)
				},
				error: function (request, status, error) {
					alert('ajax 통신 실패')
					alert(error);
				}
			})
		}
		// function final2() {
		// 	$("#submit").click(function () {
		// 		if ($(':radio[name="mood"]:checked').length < 1) {
		// 			alert("답변을 입력해주세요");
		// 			// alert(id)
		// 			$('#mood1').focus();
		// 			event.preventDefault();
		// 		}
		// 		else {
		// 			var sid = '{{sid}}'
		// 			// alert(sid)
		// 			var data = {
		// 				"mood": $('input[name="mood"]:checked').val(),
		// 				"sid": sid
		// 			}
		// 			// alert(data.mood)
		// 			var formData = new FormData();
		// 			formData.append('data', new Blob([JSON.stringify(data)], { type: "application/json" }));
		// 			formData.append('filed', document.getElementById("f").files[0]);
		// 			$.ajax({
		// 				type: 'POST',
		// 				url: '{{url_for("moody")}}',
		// 				data: formData,
		// 				contentType: false,
		// 				processData: false,
		// 				enctype: 'multipart/form-data',
		// 				success: function (data) {
		// 					location.href = "http://114.71.220.74:2017/weekly"
		// 				}
		// 			})
		// 		}
		// 	});
		// }
	</script>
</body>

</html>
